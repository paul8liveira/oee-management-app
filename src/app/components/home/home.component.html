<ons-page>
  <ons-toolbar class="toolbar">
    <div class="center">Medições do dia {{date}}</div>
    <div class="right">
      <ons-toolbar-button>
        <ons-icon icon="md-search" size="30px" (click)="dialog.show()"></ons-icon>
      </ons-toolbar-button>
    </div>
  </ons-toolbar>
  <ons-pull-hook height="64px" threshold-height="128px" (changestate)="onChangeState($event)" (action)="onAction($event)">
    {{hookMessage}}
  </ons-pull-hook>

  <ons-progress-bar indeterminate *ngIf="loading" modifier="material"></ons-progress-bar>
  <ons-list>     
    <ons-list-item tappable *ngFor="let feed of feeds; let i = index">
      <div class="left">
        <div class="list-item__thumbnail" style="background-color:lightgrey">
          <div class="icon-container">
           <div class="icon-text">{{feed.mc_cd}}</div>
          </div>
        </div>
      </div>
      <div class="center">
        <span class="list-item__title">{{feed.oee}} - {{feed.time}}</span>
        <span class="list-item__subtitle">tempo prod. (min): {{feed.field2}} / tempo turno (min): {{feed.field4}}</span>
      </div>
    </ons-list-item>    
  </ons-list>

  <ons-fab position="right bottom" class="fa-button">
    <ons-icon
    (click)="pushFeed()"
    icon="md-edit">
    </ons-icon>
  </ons-fab>

  <ons-dialog animation="default" cancelable #dialog>
      <div class="dialog-mask"></div>
        <div class="dialog">
          <div class="dialog-container" style="height: 300px;">
            <ons-page>
              <ons-toolbar>
                <div class="center">Filtros</div>
              </ons-toolbar>
              <div class="content">
                <div style="padding: 10px">
                  <p>
                    <ons-input [(value)]="date" mask="00/00/0000" placeholder="Data" style="width: 100%"></ons-input>
                  </p>
                  <p>
                    <ons-select [(ngModel)]="channelId" style="width: 100%">
                      <option *ngFor="let channel of channels" [value]="channel.id">
                      {{ channel.name }}
                      </option>
                    </ons-select>
                  </p>
                  <p>
                    <ons-select [(ngModel)]="machineCode" style="width: 100%">
                      <option *ngFor="let machine of machines" [value]="machine.code">
                      [{{ machine.code }}] {{ machine.name }}
                      </option>
                    </ons-select> 
                  </p>
                  <br>
                  <div style="text-align: center">
                      <ons-button (click)="getData(true);dialog.hide()">Filtrar</ons-button>
                  </div>                  
                </div>
              </div>
            </ons-page>
          </div>
        </div>
    </ons-dialog>

</ons-page>